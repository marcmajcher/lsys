"use strict";function render(){var t=document.getElementById("lsys"),e=new Turtle("turtle-canvas"),n=t.axiom.value,r=t.prods.value.split(";"),i={};r.forEach(function(t){var e=t.split(":"),n=_slicedToArray(e,2),r=n[0],s=n[1];i[r]=s});var s=parseInt(t.dist.value),a=parseInt(t.angle.value),u=parseInt(t.steps.value),o=parseInt(t.startx.value),l=parseInt(t.starty.value),F=parseInt(t.starta.value);new Lsystem(e,n,i,s,a).step(u).render(o,l,F)}function fillForm(t){var e=document.getElementById("lsys"),n=setList[t].split("|"),r=_slicedToArray(n,8);e.axiom.value=r[0],e.prods.value=r[1],e.dist.value=r[2],e.angle.value=r[3],e.steps.value=r[4],e.startx.value=r[5],e.starty.value=r[6],e.starta.value=r[7]}function setup(){document.getElementById("btn-render").addEventListener("click",function(t){t.preventDefault(),render()}),document.getElementById("lsys-select").addEventListener("change",function(t){fillForm(t.target.selectedIndex)})}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _slicedToArray=function(){function t(t,e){var n=[],r=!0,i=!1,s=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,s=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw s}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),setList=["F-F-F-F|F:F+F-F-FF+F+F-F|6|90|3|200|200|0","-F|F:F+F-F-F+F|9|90|4|760|200|90","R|L:R+L+R;R:L-R-L|10|60|6|80|620|0","F+F+F+F|F:F+f-FF+F+FF+Ff+FF-f+FF-F-FF-Ff-FFF;f:ffffff|10|90|2|220|550|0","F-F-F-F|F:FF-F-F-F-F-F+F|8|90|3|400|200|0","F-F-F-F|F:FF-F-F-F-FF|14|90|3|200|200|0","F-F-F-F|F:FF-F+F-F-FF|25|90|3|550|450|0","F-F-F-F|F:FF-F--F-F|8|90|4|80|70|0","F|F:F[+F]F[-F]F|8|25|4|400|700|270","F|F:F[+F]F[-F][F]|8|20|5|400|700|270","F|F:FF-[-F+F+F]+[+F-F-F]|10|22.5|4|400|700|270","X|X:F[+X]F[-X]+X;F:FF|2|20|7|400|700|270","X|X:F[+X][-X]FX;F:FF|3|25.7|7|400|790|270","X|X:F-[[X]+X]+F[+FX]-X;F:FF|9|25.7|5|400|790|270"],_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),defaultDistance=10,defaultAngle=90,Lsystem=function(){function t(e,n,r){var i=this,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:defaultDistance,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:defaultAngle;_classCallCheck(this,t),this.turtle=e,this.axiom=n,this.prods=r,this.distance=s,this.angle=a,this.reset(),this.rules={F:function(){i.turtle.penDown(),i.turtle.forward(i.distance)},f:function(){i.turtle.penUp(),i.turtle.forward(i.distance)},"-":function(){return i.turtle.right(i.angle)},"+":function(){return i.turtle.left(i.angle)},"[":function(){return i.turtle.save()},"]":function(){return i.turtle.restore()}},this.rules.R=this.rules.L=this.rules.F}return _createClass(t,[{key:"reset",value:function(){return this.moves=this.axiom,this}},{key:"step",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=0;e<t;e++){var n=this.moves;this.moves="";for(var r=0;r<n.length;r++)this.moves+=this.prods[n[r]]||n[r]}return this}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.turtle.reset(),this.turtle.moveTo(t,e),this.turtle.turn(n);for(var r=0;r<this.moves.length;r++){var i=this.rules[this.moves[r]];i&&i()}return this}}]),t}(),_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Turtle=function(){function t(e){_classCallCheck(this,t),this.canvas=document.getElementById(e),this.ctx=this.canvas.getContext("2d"),this.reset()}return _createClass(t,[{key:"reset",value:function(){this.x=this.canvas.width/2,this.y=this.canvas.height/2,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.moveTo(this.x,this.y),this.direction=0,this.states=[],this.penDown(),this.ctx.beginPath()}},{key:"penDown",value:function(){return this.draw=!0,this}},{key:"penUp",value:function(){return this.draw=!1,this}},{key:"moveTo",value:function(t,e){return this.x=t,this.y=e,this.ctx.moveTo(t,e),this}},{key:"_go",value:function(){return this.draw&&(this.ctx.lineTo(this.x,this.y),this.ctx.stroke()),this.ctx.moveTo(this.x,this.y),this}},{key:"forward",value:function(t){return this.x+=t*Math.cos(this.direction),this.y+=t*Math.sin(this.direction),this._go()}},{key:"backward",value:function(t){return this.x+=t*Math.cos(this.direction-Math.PI),this.y+=t*Math.sin(this.direction-Math.PI),this._go()}},{key:"turn",value:function(t){this.direction=t*(Math.PI/180)}},{key:"right",value:function(t){return this.direction+=t*(Math.PI/180),this}},{key:"left",value:function(t){return this.direction-=t*(Math.PI/180),this}},{key:"save",value:function(){return this.states.push({x:this.x,y:this.y,d:this.direction}),this}},{key:"restore",value:function(){var t=this.states.pop();return t&&(this.x=t.x,this.y=t.y,this.direction=t.d),this.moveTo(this.x,this.y),this}}]),t}();